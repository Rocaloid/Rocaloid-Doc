\subsection{Basic Usage}\indent

        SpectrumVisualizer can be activated in two ways: direct execution or activating from an octave console.
        
        \lstset{language = bash, tabsize = 4}
        \begin{lstlisting}
$ cd Wavetave
$ ./SpectrumVisualizer.m
        \end{lstlisting}
        
        Or
        
        \lstset{language = octave, tabsize = 8}
        \begin{lstlisting}
octave:1> SpectrumVisualizer
        \end{lstlisting}
        
        \bigskip
        
        After starting up you will get two three windows: two plot windows and one terminal.
        
        Figure 1 is used to display the time-domain signal.
        
        Figure 2 displays the decibel-magnitude spectrum of the analyzed part of the signal.
        
        The terminal shows hints and extra information of the analyzed signal.
        
        \newpage
        
        \pic{11cm}{Wavetave/Startup.png}{SpectrumVisualizer starts up}
        
        When interacting with SpectrumVisualizer, you should always keep Figure 1 focused because it is the figure listening for mouse and key events.
        
        By default no wave is loaded when SpectrumVisualizer starts. Waves can be loaded by pressing O, then a prompt goes out in the terminal:
        
        \bigskip
        \texttt{Wave to open(enclosed by quotes):}
        \bigskip
        
        Input the file path with quotes. Currently SpectrumVisualizer only supports \textbf{single channel} wav files. The recommended sample rate is \textbf{44100Hz} and the recommended length is \textbf{1 to 5 seconds}. For example:
        
        \bigskip
        \texttt{Wave to open(enclosed by quotes):'/tmp/test.wav'}
        \bigskip
        
        If you are using gnome-terminal, this can be simply done by dragging the file into the terminal.

        Then press enter.
        
        Our example is a short pronunciation of `A' that lasts for 1 second.
        
        \newpage
        
        \pic{11cm}{Wavetave/Load.png}{`A'}
        
        Some plugins for Wavetave are activated by default, as shown in Figure 2 above. The red and green line and the labels come from Plugin\_FormantFitting. We are not sure about which plugins are set to be activated by default because the settings are constantly changed.
        
        \subsubsection{Surfing through the Wave}\indent
        
        You can change the position of the analysis window by clicking on Figure 1.
        
        Press W to scale in; Press S to scale out.
        
        Press A to move the window to left; Press D to move to right.
        
        Depending on the speed of your device and the number of plugins that are activated, the response speed of SpectrumVisualizer may vary a lot. When it appears to be too slow, try to disable some plugins.
        
        \subsubsection{Configuring the Plugins}\indent
        
        Open /src/SpectrumVisualizer.m with your favourite editor. Look for the following lines:
        
        \lstset{language = octave, tabsize = 8}
        \lstinputlisting{Wavetave/PluginConfig}
        
        Activate or deactivate a plugin by removing or adding the comment mark before it.
        
        \begin{itemize}
                \item Plugin\_Load stands for plugins that are called when a new wave file is loaded.
                \item Plugin\_Wave stands for plugins that are called when Figure 1 is repainted.
                \item Plugin\_Spectrum stands for plugins that are called when Figure 2 is repainted.
        \end{itemize}
        
        If you have implemented your own plugin, you can add its name to the above list. Make sure in each group of plugins there is at least an ``Empty" because it keeps the list from being empty.

\newpage

\subsection{Function Description}

\lstset{frame = none, numbers = none, language = octave, tabsize = 8}

\subsubsection{UpdateView}
        \begin{lstlisting}
function UpdateView(Wave)
        \end{lstlisting}
        
        Draws the time domain signal in the range of visible area.
        
        \fakepar{Parameters}
        
        \io
        {Wave: 1DArray & The whole wave signal.}
        {None &}
        
        \fakepar{Global Variables}
        
        \io
        {ViewPos: Scalar            & The center of analysis window \\ & & 
                                      in the loaded wave.\\
        & ViewWidth: Scalar         & The width of analysis window.\\
        & Length: Scalar            & The length of the loaded wave.\\
        & Plugin\_Wave: CharMatrix  & The list of names of plugin to \\ & &
                                      be called.
        }
        {PlotLeft: Scalar           & The left boundary of analysis \\ & &
                                      window in the loaded wave.
        }
        
        \fakepar{Behaviours}
        
        \begin{itemize}
                \item Figure 1 is replotted.
                \item Plugins in Plugin\_Wave are called.
        \end{itemize}

\subsubsection{UpdateSpectrum}
        \begin{lstlisting}
function [Ret, RetPhase, RetWave, ExtWave] = UpdateSpectrum(Wave)
        \end{lstlisting}
        
        Returns the spectrum and waveform in the range of FFT area.
        
        \fakepar{Parameters}
        
        \io
        {Wave: 1DArray              & The whole wave signal.}
        {Ret: 1DArray               & Decibel magnitude spectrum.\\
        & RetPhase: 1DArray         & Phase spectrum.\\
        & RetWave: 1DArray          & Waveform in analysis window.\\
        & ExtWave: 1DArray          & Waveform in analysis window.\\
        &                           & (128 samples longer than\\
        &                           & RetWave)}
        
        \fakepar{Global Variables}
        
        \io
        {ViewPos: Scalar            & The center of analysis window \\ & & 
                                      in the loaded wave.\\
        & ViewWidth: Scalar         & The width of analysis window.\\
        & Length: Scalar            & The length of the loaded wave.\\
        & FFTSize: Scalar           & Number of FFT points.
        }
        {None &}
        
        \fakepar{Behaviours}
        
        \begin{itemize}
                \item None.
        \end{itemize}



